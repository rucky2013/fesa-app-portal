<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">
<struts>
	<!-- 指定Web应用的默认编码集,相当于调用HttpServletRequest的setCharacterEncoding方法 -->
	<constant name="struts.i18n.encoding" value="UTF-8" />
	<!-- 该属性指定需要Struts 2处理的请求后缀，该属性的默认值是action，即所有匹配*.action的请求都由Struts2处理。 
		如果用户需要指定多个请求后缀，则多个后缀之间以英文逗号（,）隔开。 -->
	<!-- <constant name="struts.action.extension" value="do"/> -->
	<!-- 设置浏览器是否缓存静态内容,默认值为true(生产环境下使用),开发阶段最好关闭 -->
	<constant name="struts.serve.static.browserCache" value="false" />
	<!-- 当struts的配置文件修改后,系统是否自动重新加载该文件,默认值为false(生产环境下使用),开发阶段最好打开 -->
	<constant name="struts.configuration.xml.reload" value="true" />
	<!-- 开发模式下使用,这样可以打印出更详细的错误信息 -->
	<constant name="struts.devMode" value="true" />
	<!-- 默认的视图主题 -->
	<constant name="struts.ui.theme" value="simple" />
	<constant name="struts.objectFactory" value="spring" />
	<package name="restAction" namespace="/rest" extends="json-default">
		<action name="welcome" class="cn.feisa.rest.RestCommon" method="getwelcomeinfo">
			<result type="json">
				<param name="root">jo</param>
			</result>
		</action>
		<action name="userinfo" class="cn.feisa.rest.RestCommon"
			method="getuserinfo">
			<result type="json">
				<param name="root">jo</param>
			</result>
		</action>
		<action name="validemail" class="cn.feisa.rest.RestCommon"
			method="existEmail">
			<result type="json">
				<param name="root">jo</param>
			</result>
		</action>
		<action name="register" class="cn.feisa.rest.RestCommon"
			method="createuserinfo">
			<result type="json">
				<param name="root">jo</param>
			</result>
		</action>
		<action name="comchannel" class="cn.feisa.rest.RestCommon"
			method="getcomchannel">
			<result type="json">
				<param name="root">jo</param>
			</result>
		</action>
		<action name="feedsbyspecies" class="cn.feisa.rest.RestCommon"
			method="getcomfeed">
			<result type="json">
				<param name="root">jo</param>
			</result>
		</action>
		<action name="personchannel" class="cn.feisa.rest.RestCommon"
			method="getpersonchannel">
			<result type="json">
				<param name="root">jo</param>
			</result>
		</action>
		<action name="feeddetails" class="cn.feisa.rest.RestCommon"
			method="getfeeddetail">
			<result type="json">
				<param name="root">jo</param>
			</result>
		</action>
		<action name="subscribe" class="cn.feisa.rest.RestCommon"
			method="getsubscribe">
			<result type="json">
				<param name="root">jo</param>
			</result>
		</action>
	</package>
	<package name="manageAction" namespace="/manage" extends="json-default">
		<interceptors>
			<interceptor name="ManageIntercepter" class="cn.feisa.utils.CheckManageInterceptor"></interceptor>
			<interceptor-stack name="ManageStack">
				<interceptor-ref name="defaultStack"></interceptor-ref>
				<interceptor-ref name="ManageIntercepter"></interceptor-ref>
			</interceptor-stack>
		</interceptors>
		<global-results>
			<result name="Managelogin">/WEB-INF/page/managelogin.jsp</result>
			<result name="message">/WEB-INF/page/message.jsp</result>
		</global-results>
		<action name="action_*" class="baseFeedList" method="{1}">
			<interceptor-ref name="fileUpload">
				<!-- 配置允许上传的文件类型 -->
				<param name="allowedTypes">
					image/bmp,image/png,image/gif,image/jpeg,image/pjpeg,image/jpg
				</param>
				<!-- 配置允许上传的文件大小 -->
				<!-- <param name="maximumSize">2000000000</param> -->
			</interceptor-ref>
			<interceptor-ref name="defaultStack" />
			<result name="list">/WEB-INF/page/feedlist.jsp</result>
			<result name="sublist">/WEB-INF/page/sublist.jsp</result>
			<result name="add">/WEB-INF/page/addfeed.jsp</result>
			<result name="edit">/WEB-INF/page/editfeed.jsp</result>
			<result name="subscribe">/WEB-INF/page/subscribe.jsp</result>
			<interceptor-ref name="ManageIntercepter"></interceptor-ref>
		</action>
		<action name="createinfo" class="baseFeedList" method="fabuUI">
			<result type="json">
				<param name="root">message</param>
			</result>
		</action>
		<action name="createall" class="baseFeedList" method="fabuall">
			<result type="json">
				<param name="root">message</param>
			</result>
		</action>
		<action name="cuscreateinfo" class="baseFeedList" method="cusfabuUI">
			<result type="json">
				<param name="root">message</param>
			</result>
		</action>
		<action name="cuscreateall" class="baseFeedList" method="cusfabuall">
			<result type="json">
				<param name="root">message</param>
			</result>
		</action>
		<action name="loginmanage" class="baseFeedList" method="manage">
			<result type="json">
				<param name="root">message</param>
			</result>
		</action>
		<action name="recommend" class="cn.lyf.web.recommendAction"
			method="list">
			<result name="success">/WEB-INF/page/recommend.jsp</result>
			<interceptor-ref name="ManageIntercepter"></interceptor-ref>
		</action>
		<action name="recommenddetail" class="cn.lyf.web.recommendAction"
			method="details">
			<interceptor-ref name="params" />
			<interceptor-ref name="ManageIntercepter"></interceptor-ref>
			<result name="success">/WEB-INF/page/recommend.jsp</result>
		</action>
		<action name="addrecommend" class="cn.lyf.web.recommendAction"
			method="Save">
			<result type="json">
				<param name="root">message</param>
			</result>
		</action>
		<action name="removerecommend" class="cn.lyf.web.recommendAction"
			method="Delete">
			<result type="json">
				<param name="root">message</param>
			</result>
		</action>
		<action name="updaterecommend" class="cn.lyf.web.recommendAction"
			method="Update">
			<result type="json">
				<param name="root">message</param>
			</result>
		</action>
		<action name="verbasefeed" class="cn.lyf.web.recommendAction"
			method="existfeed">
			<result type="json">
				<param name="root">message</param>
			</result>
		</action>
		<action name="adddetailfeed" class="cn.lyf.web.recommendAction"
			method="AddDetail">
			<result type="json">
				<param name="root">message</param>
			</result>
		</action>
		<action name="removedetail" class="cn.lyf.web.recommendAction"
			method="RemoveDetail">
			<result type="json">
				<param name="root">message</param>
			</result>
		</action>
	</package>
	<package name="lvyf" namespace="/" extends="json-default"> <!-- struts-default -->
		<interceptors>
			<interceptor name="loginIntercepter" class="cn.feisa.utils.CheckLoginInterceptor"></interceptor>
			<interceptor-stack name="loginStack">
				<interceptor-ref name="defaultStack"></interceptor-ref>
				<interceptor-ref name="loginIntercepter"></interceptor-ref>
			</interceptor-stack>
		</interceptors>
		<global-results>
			<result name="login">/WEB-INF/front/login.jsp</result>
			<result name="error">/WEB-INF/front/error.jsp</result>
		</global-results>
		<action name="main" class="cn.feisa.action.MainAction" method="execute">
			<result name="success">/WEB-INF/front/main.jsp</result>
		</action>
		<action name="feedmanage" class="cn.feisa.action.FeedManageAction"
			method="execute">
			<result name="success">/WEB-INF/front/feedmanage.jsp</result>
		</action>
		<action name="download" class="cn.feisa.action.DownLoadAction"
			method="execute">
			<result name="success">/WEB-INF/front/download.jsp</result>
		</action>
		<action name="person" class="cn.feisa.action.PersonAction"
			method="execute">
			<result name="success">/WEB-INF/front/person.jsp</result>
			<interceptor-ref name="loginIntercepter"></interceptor-ref>
		</action>
		<action name="personfresh" class="cn.feisa.action.PersonAction"
			method="refresh">
			<result type="json">
				<param name="root">message</param>
			</result>
		</action>
		<action name="getmoreinfo" class="cn.feisa.action.PersonAction"
			method="getMoreinfo">
			<result type="json">
				<param name="root">message</param>
			</result>
		</action>
		<action name="getmoretujian" class="cn.feisa.action.MainAction"
			method="getMoretujian">
			<result type="json">
				<param name="root">message</param>
			</result>
		</action>
		<action name="getchildren" class="cn.feisa.action.MainAction"
			method="getChildren">
			<result type="json">
				<param name="root">message</param>
			</result>
		</action>
		<action name="personread" class="cn.feisa.action.PersonAction"
			method="read">
			<result type="json">
				<param name="root">message</param>
			</result>
		</action>
		<action name="feeddetail" class="cn.feisa.action.FeedDetailAction"
			method="execute">
			<result name="success">/WEB-INF/front/feeddetail.jsp</result>
		</action>
		<action name="feeddescription" class="cn.feisa.action.FeedDescriptionAction"
			method="execute">
			<result name="success">/WEB-INF/front/feeddescription.jsp</result>
		</action>
		<action name="about" class="cn.feisa.action.AboutAction"
			method="execute">
			<result name="success">/WEB-INF/front/about.jsp</result>
		</action>
		<action name="register" class="cn.feisa.action.RegisterAction"
			method="register">
			<result name="reg">/WEB-INF/front/register.jsp</result>
		</action>
		<action name="missingPwd" class="cn.feisa.mail.missingPwdAction"
			method="missingpassword">
			<result name="miss">/WEB-INF/front/missingpwd.jsp</result>
		</action>
		<action name="sendEmail" class="cn.feisa.mail.missingPwdAction"
			method="sendEmail">
			<result type="json">
				<param name="root">result</param>
			</result>
		</action>
		<action name="changePwd" class="cn.feisa.mail.missingPwdAction"
			method="changePwd">
			<result type="json">
				<param name="root">result</param>
			</result>
		</action>
		<action name="resetPwd" class="cn.feisa.mail.missingPwdAction"
			method="resetpassword">
			<result name="reset">/WEB-INF/front/resetpwd.jsp</result>
		</action>
		<action name="loginNew" class="cn.feisa.action.LoginAction"
			method="login">
			<result type="json">
				<param name="root">result</param>
			</result>
		</action>
		<action name="loginOut" class="cn.feisa.action.LoginAction"
			method="loginout">
			<result type="json">
				<param name="root">result</param>
			</result>
		</action>
		<action name="loginIn" class="cn.feisa.action.LoginAction"
			method="loginpage">
			<result name="loginpage">/WEB-INF/front/login.jsp</result>
		</action>
		<action name="registerinfo" class="cn.feisa.action.RegisterAction"
			method="registerinfo">
			<result type="json">
				<param name="root">result</param>
			</result>
		</action>
		<action name="existemail" class="cn.feisa.action.RegisterAction"
			method="existemail">
			<result type="json">
				<param name="root">result</param>
			</result>
		</action>
		<action name="user_addfeed" class="cn.feisa.action.FeedManageAction"
			method="adduserfeed">
			<result type="json">
				<param name="root">message</param>
			</result>
		</action>
		<action name="user_removefeed" class="cn.feisa.action.FeedManageAction"
			method="removeuserfeed">
			<result type="json">
				<param name="root">message</param>
			</result>
		</action>
		<action name="reader" class="cn.feisa.action.ReaderAction"
			method="execute">
			<result name="success">/WEB-INF/front/reader.jsp</result>
			<interceptor-ref name="loginIntercepter"></interceptor-ref>
		</action>
		<action name="getcustomfeeddetail" class="cn.feisa.action.ReaderAction"
			method="getdetail">
			<result type="json">
				<param name="root">message</param>
			</result>
		</action>
		<action name="setcustomfeed" class="cn.feisa.action.ReaderAction"
			method="creaSubscribe">
			<result type="json">
				<param name="root">message</param>
			</result>
		</action>
		<action name="FileDownload" class="cn.feisa.action.ReaderAction"
			method="getFileDown">
			<result name="success" type="stream">
				<param name="contentType">text/plain</param>
				<param name="contentDisposition">attachment;filename="${fileName}"</param>
				<param name="inputName">inputStream</param>
				<param name="bufferSize">1024</param>
			</result>
		</action>
	</package>
</struts>
